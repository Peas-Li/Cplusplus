# 计算机网络

## 概述

### 网络、互连网(互联网)和因特网

1. 网络：由若干结点(Node)和连接这些结点的链路(Link)组成；
2. 互联网：多个网络还可以通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互联网(或互连网)；
3. 因特网：世界上最大的互连网络；
   1. 边缘部分：由所有连接在因特网上的主机组成。这部分是用户直接使用的，用来进行通信(传送数据、音频或视频)和资源共享；
   2. 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的(提供连通性和交换)；

### 三种交换方式

1. 电路交换：
   1. 优点：通信时延小、有序传输、没有冲突、适用范围广
      、实时性强、控制简单；
   2. 缺点：建立连接时间长、线路独占，使用效率低、灵活性差、难以规格化；
2. 报文交换：
   1. 优点：无需建立连接、动态分配线路、提高线路可靠性
      、提高线路利用率、提供多目标服务；
   2. 缺点：引起了转发时延、需要较大存储缓存空间、需要传输额外的信息量；
3. 分组交换：
   1. 优点：无需建立连接、线路利用率高、简化了存储管理、加速传输、减少出错概率和重发数据量；
   2. 缺点：引起了转发时延、需要传输额外的信息量、对于数据报服务，存在失序、丢失或重复分组的问题、对于虚电路服务，存在呼叫建立、数据传输和虚电路释放三个过程；

### 计算机网络的定义：

1. 计算机网络的精确定义并未统一；
2. 计算机网络的最简单的定义是:一些互相连接的、自治的计算机的集合。互连是指计算机之间可以通过有线或无线的方式进行数据通信；自治是指独立的计算机，它有自己的硬件和软件，可以单独运行使用；集合 是指至少需要两台计算机；
3. 计算机网络的较好的定义是:计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的(例如，传送数据或视频信号)。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用；

### 计算机网络的分类

1. 按交换技术分类：电路交换网络、报文交换网络、分组交换网络；
2. 按使用者分类：公用网、专用网；
3. 按传输介质分类：有线、无线；
4. 按覆盖范围分类：广域网WAN、城域网MAN、局域网LAN、个域网PAN；
5. 按拓扑结构分类：总线型网络、星型网络、环型网络、网状型网络；

### 计算机网络的性能指标

1. 速率：

   1. 比特：计算机中数据量的单位，也是信息论中信息量的单位。一个比特就是二进制数字中的一个1或0；
      1. 常用数据量单位:
         1. 8 bit= 1 Byte
         2. KB = 2^10^ B
         3. MB = 2^20^ B
         4. GB = 2^30^ B
         5. TB = 2^40^ B
   2. 速率：连接在计算机网络上的主机在数字信道上传送比特的速率，也称为比特率或数据率；
      1. 常用数据率单位:
         1. bit/s (b/s, bps)
         2. kb/s = 10^3^ b/s
         3. Mb/s = 10^6^ b/s
         4. Gb/s = 10^9^ b/s
         5. Tb/s = 10^12^ b/s

2. 带宽：

   1. 带宽在模拟信号系统中的意义：信号所包含的各种不同频率成分所占据的频率范围，单位Hz(kHz，MHz，GHz)；
   2. 带宽在计算机网络中的意义：用来表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”；
   3. 其实，“带宽”的这两种表述之间有着密切的联系。一条通信线路的“频带宽度”越宽，其所传输数据的“最高数据率”也越高。

3. 吞吐量：

   1. 吞吐量表示在单位时间内通过某个网络(或信道、接口)的数据量；
   2. 吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络；
   3. 吞吐量受网络的带宽或额定速率的限制。

4. 时延：

   1. 发送时延：分组长度（b）/ 发送速率（b/s)；

   2. 传播时延：信道长度（m）/ 电磁波传播速率（m/s）；

      1. 自由空间：3 x 10^8^ m/s；
      2. 铜线：2.3 x 10^8^ m/s；
      3. 光纤：2.0 x 10^8^ m/s；

   3. 处理时延：一般不方便计算；

   4. 时延计算：

      ![image-20240327195354725](F:\typoraImg\计算时延.png)

5. 时延带宽积：若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特，链路的时延带宽积又称为以比特为单位的链路长度；

6. 往返时间：在许多情况下，因特网上的信息不仅仅单方向传输，而是双向交互，我们有时很需要知道双向交互一次所需的时间，因此，往返时间RTT(Round-Trip Time)也是一个重要的性能指标。

7. 利用率：

   1. 信道利用率：用来表示某信道有百分之几的时间是被利用的（有数据通过）；
   2. 网络利用率：全网络的信道利用率的加权平均；
   3. 根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加，因此，信道利用率并非越高越好。如果令Do表示网络空闲时的时延，D表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示D、Do和利用率U之间的关系：D = Do / (1 - U)；
      1. 当网络的利用率达到50%时，时延就要加倍；
      2. 当网络的利用率超过50%时，时延急剧增大；
      3. 当网络的利用率接近100%时，时延就趋于无穷大；
      4. 因此，一些拥有较大主干网的ISP通常会控制它们的信道利用率不超过50%。如果超过了，就要准备扩容，增大线路的带宽；
      5. 也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费。应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在一个合理的范围内；

8. 丢包率：

   1. 丢包率即分组丢失率，是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率；
   2. 丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等；
   3. 丢包率是网络运维人员非常关心的一个网络性能指标，但对于普通用户来说往往并不关心这个指标因为他们通常意识不到网络丢包；
   4. 分组丢失主要有两种情况：
      1. 分组在传输过程中出现误码，被结点丢弃；
      2. 分组到达一台队列已满的分组交换机时被丢弃，在通信量较大时就可能造成网络拥塞；
   5. 丢包率反映了网络的拥塞情况:
      1. 无拥塞时路径丢包率为0；
      2. 轻度拥塞时路径丢包率为1%~4%；
      3. 严重拥塞时路径丢包率为5%~15%；

### 计算机网络体系结构

1. OSI体系结构（法律上的国际标准）：

   ![image-20240320151437492](F:\typoraImg\osi.png)

2. TCP/IP体系结构（事实上的国际标准）：

   ![image-20240320151657855](F:\typoraImg\image-20240320151657855.png)

   ![image-20240320152355670](F:\typoraImg\image-20240320152355670.png)

3. 原理体系结构：

   ![image-20240320151831238](F:\typoraImg\image-20240320151831238.png)

4. 计算机网络体系结构分层的必要性：

   1. 物理层：解决使用何种信号来传输比特的问题；
   2. 数据链路层：解决分组在一个网络(或一段链路)上传输的问题；
   3. 网络层：解决分组在多个网络上传输(路由)的问题；
   4. 运输层：解决进程之间基于网络的通信问题；
   5. 应用层：解决通过应用进程的交互来实现特定网络应用的问题；

   ![image-20240327195231478](F:\typoraImg\分层结构的必要性.png)

5. 专业术语：

   1. 实体

      1. 实体：任何可发送或接收信息的硬件或软件进程；
      2. 对等实体：收发双方相同层次中的实体；

      ![image-20240322111341575](F:\typoraImg\实体.png)

   2. 协议：

      1. 协议：控制两个对等实体进行逻辑通信的规则的集合；

      2. 协议的三要素：

         1. 语法：定义所交换信息的格式；

            ![image-20240322111722646](F:\typoraImg\协议-语法.png)

         2. 语义：定义收发双方所要完成的操作；

         3. 同步：定义收发双方的时序关系；

            ![image-20240322112153380](F:\typoraImg\协议-同步.png)

   3. 服务：

      ![image-20240322112702969](F:\typoraImg\协议-服务.png)

      1. 在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务；

      2. 要实现本层协议，还需要使用下面一层所提供的服务；

      3. 协议是“水平的”，服务是“垂直的”；

      4. 实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是”透明“的；

      5. 服务访问点：

         1. 在同一系统中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型；
         2. 数据链路层的服务访问点为帧的“类型”字段；
         3. 网络层的服务访问点为IP数据报首部中的“协议字段”；
         4. 运输层的服务访问点为“端口号”；

      6. 服务原语：

         1. 协议数据单元PDU：对等层次之间传送的数据包称为该层的协议数据单元；
         2. 服务数据单元SDU：同一系统内，层与层之间交换的数据包称为服务数据单元；
         3. 多个SDU可以合成为一个PDU;一个SDU也可划分为几个PDU；

         ![image-20240322112940742](F:\typoraImg\服务原语.png)